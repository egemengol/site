<!DOCTYPE html>
<html lang="en" x-data="{ darkMode: $persist(false) }" :data-theme="darkMode ? 'dark' : 'light'">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ config.title }}{% endblock title %} | Egemen</title>
    <style>{{ load_data(path="/critical.css") }}</style>
    <link rel="stylesheet" href="/main.css">

    <script async defer src="/theme.js"></script>
    <script async defer src="/search.js"></script>

    <!-- Preload critical assets -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="preload" href="/dark_mode.svg" as="image" type="image/svg+xml">
    <link rel="preload" href="/light_mode.svg" as="image" type="image/svg+xml">

    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>
  <body class="{% block page_class %}default{% endblock page_class %}">
    <header class="site-header">
      <nav>
        <a href="/">
          {% set logo = resize_image(path="logo.png", width=36, height=36) %}
          <img class="logo-link" src="{{ logo.url | replace(from=config.base_url, to="") }}" width="36" height="36" />Home</a>
        <a href="/blog/">Blog</a>
        <!-- <a href="/book/">Book</a> -->
      </nav>
      <div class="header-controls">
        <div class="search-container">
          <input
            id="search"
            type="search"
            placeholder="ðŸ”Ž Search"
            aria-label="Search"
            disabled
          />
        </div>
        <button
          @click="darkMode = !darkMode"
          class="theme-toggle"
          :aria-label="darkMode ? 'Switch to light mode' : 'Switch to dark mode'"
          :title="darkMode ? 'Switch to light mode' : 'Switch to dark mode'"
        >
          <img :src="darkMode ? '/light_mode.svg' : '/dark_mode.svg'" :alt="darkMode ? 'Light mode' : 'Dark mode'" width="24" height="24" />
        </button>
      </div>
    </header>
    <main>
      <div id="search-results-main" class="search-results" style="display: none;">
        <h2>Search Results</h2>
        <ul id="search-results-items-main" class="search-results__list"></ul>
      </div>
      <div class="content">
        {% block content %}{% endblock content %}
      </div>
    </main>
    <footer>
      <p>&copy; 2025 Egemen GÃ¶l</p>
    </footer>
  </body>
</html>
