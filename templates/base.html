<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ config.title }}{% endblock title %} | Egemen</title>

    <!-- Minimal theme initialization to prevent FOUC -->
    <script>
      (function() {
        let isDark;
        try {
          const stored = localStorage.getItem("isDark");
          isDark = stored !== null ? stored === "true" : window.matchMedia("(prefers-color-scheme: dark)").matches;
          if (stored === null) localStorage.setItem("isDark", isDark);
        } catch (e) {
          isDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        }
        document.documentElement.setAttribute("data-theme", isDark ? "dark" : "light");
        window.currentThemeIsDark = isDark;

        // Inject preload for the correct theme icon
        const iconPath = isDark ? "/light_mode.svg" : "/dark_mode.svg";
        document.write('<link rel="preload" href="' + iconPath + '" as="image" type="image/svg+xml">');
      })();
    </script>

    <style>
      {{ load_data(path="/critical.css") | safe }}
    </style>
    <link rel="stylesheet" href="/main.css">

    <script async defer src="/theme.js"></script>
    <script async defer src="/search.js"></script>

    <!-- Preload critical assets -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">


  </head>
  <body class="{% block page_class %}default{% endblock page_class %}">
    <header class="site-header">
      <nav class="navbar">
        <a href="/">
          {% set logo = resize_image(path="logo.png", width=36, height=36) %}
          <img class="logo-link" src="{{ logo.url | replace(from=config.base_url, to="") }}" width="36" height="36" />Home</a>
        <a href="/blog/">Blog</a>
        <!-- <a href="/book/">Book</a> -->
        <div class="spacer"></div>
        <div class="search-container">
          <input
            id="search"
            type="search"
            placeholder="ðŸ”Ž Search"
            aria-label="Search"
            disabled
          />
        </div>
        <button
          class="theme-toggle"
          aria-label="Switch theme"
          title="Switch theme"
        >
          <script>
            const isDark = window.currentThemeIsDark;
            document.write('<img id="theme-icon" src="' + (isDark ? '/light_mode.svg' : '/dark_mode.svg') + '" alt="' + (isDark ? 'light' : 'dark') + '" width="24" height="24" />');
          </script>
        </button>
      </nav>
    </header>
    <main>
      <div id="search-results-main" class="search-results" style="display: none;">
        <h2>Search Results</h2>
        <ul id="search-results-items-main" class="search-results__list"></ul>
      </div>
      <div class="content">
        {% block content %}{% endblock content %}
      </div>
    </main>
    <footer>
      <div class="footer-content">
        <div class="footer-links">
          <a href="https://github.com/egemengol" target="_blank">GitHub</a>
          <a href="https://linkedin.com/in/egemen-gol/" target="_blank">LinkedIn</a>
          <a href="mailto:egemengol@gmail.com">Email</a>
          <a href="https://alphy.app" target="_blank">Alphy</a>
          <a href="https://kindlepathy.com" target="_blank">Kindlepathy</a>
        </div>
        <p>&copy; 2025 Egemen GÃ¶l</p>
      </div>
    </footer>
  </body>
</html>
